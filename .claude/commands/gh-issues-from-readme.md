---
description: README.mdから必要なIssueを一括作成する
---

あなたはClaudeCodeです。すべての分析、Issue作成、レポートは**日本語で**行ってください。

## 前提条件の確認

まず、以下の前提条件を確認してください。

1. GitHub CLIが認証済みであることを確認する（`gh auth status`）
   - 未認証の場合は `gh auth login` を実行してユーザーに指示を求める
2. 現在のディレクトリがGitリポジトリであることを確認する
   - リポジトリでない場合は、エラーメッセージを表示して処理を中断する
3. リモートリポジトリが設定されていることを確認する
   - 設定されていない場合は、エラーメッセージを表示して処理を中断する
4. README.mdが存在することを確認する
   - 存在しない場合は、エラーメッセージを表示して処理を中断する

## Issue一括作成の実行

README.mdからプロジェクトの内容を理解し、必要なIssueを一括作成してください。

### 1. README.mdの読み取りと分析

1. **README.mdを読み取る**
   - プロジェクトの目的と概要を理解する
   - 主要な機能リストを抽出する
   - 技術スタックを確認する
   - セットアップ手順を理解する
   - TODOリストやRoadmapがあれば確認する

2. **プロジェクト構造を分析**
   - ディレクトリ構造を確認する
   - 既存のファイルを確認する
   - package.json、requirements.txt等の依存関係ファイルを確認する

3. **Issue作成の優先順位を判断**
   以下の基準でIssueの優先順位を決定する：
   - **P0 (Critical)**: プロジェクトの基盤となる機能
   - **P1 (High)**: コア機能の実装
   - **P2 (Medium)**: 拡張機能の実装
   - **P3 (Low)**: Nice-to-have機能

### 2. Issueリストの作成

README.mdの内容から以下のカテゴリでIssueを作成：

#### セットアップ関連
- 開発環境のセットアップ
- CI/CDパイプラインの構築
- 依存関係のインストール手順
- 環境変数の設定

#### コア機能の実装
- README.mdに記載されている主要機能ごとにIssueを作成
- 各機能は独立したIssueとして分割する
- 機能の依存関係を明確にする

#### ドキュメント整備
- APIドキュメントの作成
- コントリビューションガイドの作成
- アーキテクチャ設計書の作成

#### テスト・品質管理
- ユニットテストの実装
- 統合テストの実装
- Lintとフォーマッタの設定
- コードカバレッジの設定

### 3. ユーザーへの確認

作成予定のIssueリストをユーザーに提示し、以下の形式で確認を求める：

```markdown
## README.mdから抽出したIssue一覧

### セットアップ関連 (Priority: P0)
1. [Setup] 開発環境のセットアップ手順を整備
2. [Setup] CI/CDパイプラインの構築

### コア機能 (Priority: P1)
3. [Feature] ユーザー認証機能の実装
4. [Feature] データベース接続の実装
5. [Feature] API エンドポイントの実装

### 拡張機能 (Priority: P2)
6. [Feature] ログ機能の実装
7. [Feature] キャッシュ機能の実装

### ドキュメント (Priority: P2)
8. [Docs] APIドキュメントの作成
9. [Docs] コントリビューションガイドの作成

### テスト・品質 (Priority: P1)
10. [Test] ユニットテストの実装
11. [Test] 統合テストの実装

合計: XX件のIssueを作成予定

このリストで問題ないでしょうか？
- 追加したいIssueはありますか？
- 削除したいIssueはありますか？
- 優先順位の変更はありますか？
```

### 4. Issue作成の実施

ユーザーの承認後、以下の手順でIssueを作成：

1. **テンプレートの選択**
   - 機能実装: `.github/ISSUE_TEMPLATE/feature_request.md`
   - バグ修正: `.github/ISSUE_TEMPLATE/bug_report.md`
   - ドキュメント: カスタムテンプレート

2. **Issue作成**
   各Issueを`gh issue create`で作成：
   ```bash
   gh issue create \
     --title "[カテゴリ] タイトル" \
     --body "詳細な説明" \
     --label "priority:p1,type:feature"
   ```

3. **ラベルの設定**
   以下のラベルを自動的に付与：
   - 優先度: `priority:p0`, `priority:p1`, `priority:p2`, `priority:p3`
   - タイプ: `type:feature`, `type:bug`, `type:docs`, `type:test`, `type:setup`
   - ステータス: `status:todo`

4. **マイルストーンの設定（オプション）**
   - プロジェクトの初期リリース用マイルストーンがあれば設定
   - なければスキップ

5. **GitHub Projectsへの自動追加**
   - GitHub Projects が存在するか確認する (`gh project list`)
   - プロジェクトが存在する場合、作成したすべてのIssueを自動的にプロジェクトに追加する
   - プロジェクトが複数ある場合は、最新のプロジェクトまたはユーザーに選択を求める
   ```bash
   # プロジェクト一覧を取得
   gh project list --owner [owner]

   # 各Issueをプロジェクトに追加
   gh project item-add [project-number] --owner [owner] --url [issue-url]
   ```

### 6. 作成結果の報告

すべてのIssue作成後、以下の情報を報告：

```markdown
## Issue作成完了

合計 XX件のIssueを作成しました。

### 作成されたIssue
- #1: [Setup] 開発環境のセットアップ手順を整備 (P0)
- #2: [Setup] CI/CDパイプラインの構築 (P0)
- #3: [Feature] ユーザー認証機能の実装 (P1)
- ...

### 推奨される開始順序
1. Issue #1, #2 (セットアップ)
2. Issue #3, #4, #5 (コア機能)
3. Issue #10, #11 (テスト)
4. Issue #6, #7 (拡張機能)
5. Issue #8, #9 (ドキュメント)

### 次のステップ
最初のIssueから開始する場合:
```
/gh-issue 1
```

一覧を確認する場合:
```
gh issue list
```
```

### 作成されたプロジェクト連携
- ✓ XX件のIssueをプロジェクト "[プロジェクト名]" に追加しました
- プロジェクトURL: https://github.com/users/[owner]/projects/[number]

### 7. クリーンアップ

- 作成過程で使用した一時ファイルがあれば削除する
- 不要な変数や状態をクリアする

## Issue作成のベストプラクティス

### タイトルの命名規則
- `[カテゴリ] 明確な説明`形式を使用
- カテゴリ例: Setup, Feature, Bug, Docs, Test, Refactor

### 説明文の構造
各Issueの説明文には以下を含める：

```markdown
## 概要
[この機能/タスクの目的と概要]

## 背景
[なぜこの機能が必要か]

## タスク
- [ ] タスク1
- [ ] タスク2
- [ ] タスク3

## 受け入れ基準
- 基準1が満たされている
- 基準2が満たされている

## 技術的な考慮事項
- [使用する技術やライブラリ]
- [注意すべきポイント]

## 参考資料
- [関連ドキュメントやリンク]
```

## オプション引数

ユーザーが追加の引数を指定した場合：
- `--dry-run`: Issueを実際に作成せず、作成予定のリストのみ表示
- `--priority=[p0|p1|p2|p3]`: 指定した優先度以上のIssueのみ作成
- `--category=[setup|feature|docs|test]`: 特定のカテゴリのIssueのみ作成
- `--milestone=[name]`: 作成するすべてのIssueに指定したマイルストーンを設定
- `--auto-approve`: ユーザー確認をスキップして自動作成（非推奨）

## 注意事項

- Issue作成前に必ずユーザーの確認を得ること
- 大量のIssue（20件以上）を作成する場合は、段階的な作成を提案すること
- README.mdの内容が不明確な場合は、ユーザーに詳細を確認すること
- 既存のIssueと重複しないように`gh issue list`で確認すること
- TDD（テスト駆動開発）で対応できるように、各Issueに具体的なタスクと受け入れ基準を記載すること
- Issue番号は作成順に付与されるため、依存関係がある場合は順序に注意すること
