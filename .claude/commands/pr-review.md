---
description: GitHub Pull Requestのレビューを実施する
---

あなたはClaudeCodeです。すべてのレビューコメント、分析、評価は**日本語で**行ってください。

## 前提条件の確認

まず、以下の前提条件を確認してください。

1. GitHub CLIが認証済みであることを確認する（`gh auth status`）
   - 未認証の場合は `gh auth login` を実行してユーザーに指示を求める
2. 現在のディレクトリがGitリポジトリであることを確認する
   - リポジトリでない場合は、エラーメッセージを表示して処理を中断する
3. リモートリポジトリが設定されていることを確認する
   - 設定されていない場合は、エラーメッセージを表示して処理を中断する

## レビューの実行

指定されたPull Requestの内容をレビューしてください。

1. **PRの取得**
   - `gh pr view $ARGUMENTS` でPRの詳細を確認する
   - PRが存在しない場合は、エラーメッセージを表示してユーザーに確認を求める

2. **変更内容の確認**
   - `gh pr diff $ARGUMENTS` でPRの差分を確認する
   - 変更されたファイルと変更内容を把握する

3. **コードレビューの実施**
   以下の観点でコードをレビューする：

   **コードの品質**
   - コードの可読性は十分か
   - 命名規則は統一されているか
   - 適切なコメントが付いているか
   - 複雑度が高い箇所はないか

   **機能性**
   - 実装がPRの目的を満たしているか
   - エッジケースが考慮されているか
   - エラーハンドリングは適切か

   **テスト**
   - テストは十分に書かれているか
   - テストケースは適切か
   - カバレッジは十分か

   **セキュリティ**
   - セキュリティ上の問題はないか
   - 入力値の検証は適切か
   - 機密情報の漏洩リスクはないか

   **パフォーマンス**
   - パフォーマンス上の問題はないか
   - 不要な処理はないか
   - リソースの使用は適切か

4. **レビューコメントの作成**
   - 各観点での指摘事項をまとめる
   - 改善提案は具体的なコード例と共に提示する
   - 優先度（必須/推奨/任意）を明示する

5. **レビュー結果の提示**
   - 指摘事項を構造化して表示する
   - 良い点も併せて伝える
   - 総合的な評価（Approve/Request Changes/Comment）を提示する

## レビュー結果のフォーマット

レビュー結果は以下の形式で提示してください：

```markdown
## PR概要
- タイトル: [PRのタイトル]
- 変更ファイル数: [数]
- 追加行数: [数]
- 削除行数: [数]

## 良い点
- [良い点1]
- [良い点2]

## 指摘事項

### 必須（Must Fix）
- [ファイル名:行番号] [指摘内容]

### 推奨（Should Fix）
- [ファイル名:行番号] [指摘内容]

### 任意（Nice to Have）
- [ファイル名:行番号] [指摘内容]

## 総合評価
[Approve/Request Changes/Comment]

## 理由
[評価の理由]
```

## オプション

ユーザーが追加の引数を指定した場合：
- `--checkout`: PRのブランチをチェックアウトしてローカルで確認する
- `--test`: テストを実行して結果を確認する
- `--comment`: レビュー結果をPRにコメントとして投稿する（`gh pr review $ARGUMENTS --comment -b "レビュー内容"`）
