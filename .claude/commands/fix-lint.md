---
description: Lintエラーの自動修正
---

あなたはClaudeCodeです。プロジェクトのLintエラーを検出し、自動的に修正してください。
すべての出力とレポートは**日本語で**行ってください。

## 実行手順

1. **プロジェクトの分析**
   - package.json、pyproject.toml、.eslintrc、.prettierrcなどの設定ファイルを確認する
   - 使用されているLintツールを特定する
   - Lintコマンドを確認する

2. **Lintの実行**
   プロジェクトで使用されているLintツールを実行：

   **JavaScript/TypeScript**
   - ESLint: `npm run lint` または `eslint .`
   - Prettier: `npm run format` または `prettier --check .`
   - 両方使用している場合は両方実行

   **Python**
   - Ruff: `ruff check .`
   - Black: `black --check .`
   - Flake8: `flake8 .`
   - mypy: `mypy .`
   - isort: `isort --check-only .`

   **その他の言語**
   - プロジェクトの設定に従って適切なLintツールを実行

3. **エラーの分類**
   検出されたエラーを以下のように分類：

   **自動修正可能**
   - フォーマッティングの問題
   - import文の順序
   - 未使用の変数・import
   - セミコロンの有無
   - インデントの不整合

   **手動修正が必要**
   - 型エラー
   - 未定義の変数
   - ロジックの問題
   - セキュリティ上の問題

4. **自動修正の実行**
   自動修正可能なエラーを修正：

   **JavaScript/TypeScript**
   ```bash
   # ESLintの自動修正
   eslint . --fix
   # または
   npm run lint:fix

   # Prettierの自動修正
   prettier --write .
   # または
   npm run format
   ```

   **Python**
   ```bash
   # Ruffの自動修正
   ruff check --fix .

   # Blackの自動修正
   black .

   # isortの自動修正
   isort .
   ```

5. **手動修正の実施**
   自動修正できなかったエラーを手動で修正：
   - エラーメッセージを確認
   - 該当ファイルを読み取る
   - 適切な修正を実施
   - 再度Lintを実行して確認

6. **修正結果の確認**
   - すべてのLintエラーが解消されたことを確認
   - テストを実行して既存機能が壊れていないことを確認
   - 修正内容をまとめて報告

## 修正レポートの形式

修正結果は以下の形式で報告してください：

```markdown
## Lint修正レポート

### 実行したLintツール
- [ツール名1] (バージョン)
- [ツール名2] (バージョン)

### 検出されたエラー
- 合計: [数]件
- 自動修正: [数]件
- 手動修正: [数]件

### 自動修正した内容
- [ファイル名]: [修正内容]
- [ファイル名]: [修正内容]

### 手動修正した内容
- [ファイル名:行番号]: [修正内容と理由]
- [ファイル名:行番号]: [修正内容と理由]

### 残存する問題
- [ファイル名:行番号]: [問題の内容] (理由: [修正しなかった理由])

### テスト結果
- [成功/失敗]
- 失敗した場合の詳細: [詳細]
```

## オプション引数

ユーザーが追加の引数を指定した場合：
- `--check-only`: エラーの検出のみで修正は行わない
- `--auto-only`: 自動修正のみ実行（手動修正はスキップ）
- `--type=[tool]`: 特定のLintツールのみ実行（例: `--type=eslint`）
- `--files=[pattern]`: 特定のファイルパターンのみ対象（例: `--files=src/**/*.ts`）

## 注意事項

- 修正前にgit statusを確認し、未コミットの変更がある場合は警告する
- 大量の変更が発生する場合は、ユーザーに確認を求める
- 自動修正で意図しない変更が発生する可能性があることを考慮する
- 修正後は必ずテストを実行する
- Lintの設定ファイルは変更しない（設定自体に問題がある場合は指摘のみ）
- 修正内容は適切な粒度でコミットする
